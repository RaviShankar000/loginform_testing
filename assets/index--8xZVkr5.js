(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const g of r.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&s(g)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}})();const d="https://loginform-backend-on5e.onrender.com/api/auth",m=document.getElementById("container"),E=document.getElementById("signUp"),I=document.getElementById("signIn"),u=document.getElementById("registerForm"),v=document.getElementById("loginForm"),f=document.getElementById("loading"),y=document.getElementById("dashboard"),L=document.getElementById("forgot-password-link"),c=document.getElementById("forgot-modal"),B=document.querySelector(".close-modal");E.addEventListener("click",()=>{m.classList.add("right-panel-active")});I.addEventListener("click",()=>{m.classList.remove("right-panel-active")});document.querySelectorAll(".toggle-password").forEach(e=>{e.addEventListener("click",function(){const t=this.getAttribute("data-target"),o=document.getElementById(t);o.type==="password"?(o.type="text",this.classList.remove("fa-eye-slash"),this.classList.add("fa-eye")):(o.type="password",this.classList.remove("fa-eye"),this.classList.add("fa-eye-slash"))})});const h=document.getElementById("reg-password"),l=document.getElementById("strength-bar"),a=document.getElementById("strength-text");h.addEventListener("input",()=>{const e=h.value;let t=0;e.length>=8&&t++,/[A-Z]/.test(e)&&t++,/[0-9]/.test(e)&&t++,/[^A-Za-z0-9]/.test(e)&&t++,l.className="strength-bar",t<2?(l.classList.add("strength-red"),a.textContent="Weak",a.style.color="red"):t<4?(l.classList.add("strength-orange"),a.textContent="Medium",a.style.color="orange"):(l.classList.add("strength-green"),a.textContent="Strong",a.style.color="green"),l.style.width=t*25+"%"});u.addEventListener("submit",async e=>{e.preventDefault();const t=document.getElementById("reg-username").value,o=document.getElementById("reg-email").value,s=document.getElementById("reg-password").value;i(!0),document.getElementById("reg-error").textContent="";try{const n=await fetch(`${d}/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,email:o,password:s})}),r=await n.json();n.ok?(alert("Registration Successful! Please Sign In."),m.classList.remove("right-panel-active"),u.reset()):w(r,"reg-error")}catch{document.getElementById("reg-error").textContent="Server connection error"}finally{i(!1)}});v.addEventListener("submit",async e=>{e.preventDefault();const t=document.getElementById("login-username").value,o=document.getElementById("login-password").value;i(!0),document.getElementById("login-error").textContent="";try{const s=await fetch(`${d}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:o})}),n=await s.json();s.ok?(localStorage.setItem("token",n.token),p(n.user)):document.getElementById("login-error").textContent=n.msg||"Login failed"}catch{document.getElementById("login-error").textContent="Server connection error"}finally{i(!1)}});function w(e,t){const o=document.getElementById(t);e.errors?o.textContent=e.errors.map(s=>s.msg).join(", "):e.msg?o.textContent=e.msg:o.textContent="An error occurred"}async function x(){const e=localStorage.getItem("token");if(e){i(!0);try{const t=await fetch(`${d}/profile`,{headers:{"x-auth-token":e}}),o=await t.json();t.ok?p(o):localStorage.removeItem("token")}catch(t){console.error(t)}finally{i(!1)}}}function p(e){m.classList.add("hidden"),y.classList.remove("hidden"),y.classList.add("visible"),document.getElementById("user-name").textContent=e.username,document.getElementById("user-email").textContent=e.email,e.lastLogin&&(document.getElementById("user-last-login").textContent=new Date(e.lastLogin).toLocaleString())}document.getElementById("logoutBtn").addEventListener("click",()=>{localStorage.removeItem("token"),window.location.reload()});L.addEventListener("click",e=>{e.preventDefault(),c.style.display="flex"});B.addEventListener("click",()=>{c.style.display="none"});window.onclick=function(e){e.target==c&&(c.style.display="none")};document.getElementById("forgotForm").addEventListener("submit",async e=>{e.preventDefault();const t=document.getElementById("forgot-email").value,o=document.getElementById("forgot-msg");o.textContent="Sending...";try{const s=await fetch(`${d}/forgot-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})}),n=await s.json();o.textContent=n.msg,o.style.color=s.ok?"green":"red"}catch{o.textContent="Error"}});function i(e){e?f.classList.remove("hidden"):f.classList.add("hidden")}x();
